# CMCLFU
A mod version of LFU replacement policy. Try to addressing aging set issues of LFU Cache Replacement with a consecutive miss counter.
To run this project, several modifications of gem5 are needed to set the flag of miss/hit. This repo only shows the replacement policy.

CMCLFU tracks the overall performance of the entire cache system with a global miss counter. It assumes that the over- all performance of a cache system can be partly represented by the number of consecutive misses that have occurred. If the memory system observes a high number of consecutive misses, then it means the LFU replacement policy is not work-
ing well: it tends to pick non-optimal victims so that data which may still be useful in the future cannot be correctly held in the memory.
Based on this idea, we can dynamically adjust the replace- ment policy to make it fit for complex workloads. When the consecutive miss counter is low (which suggests traditional LFU currently has an acceptable performance), CMCLFU has same behavior as traditional LFU. When it detects the con- secutive miss counter exceeds a certain threshold (termed as RandomRPThreshold), this suggests that traditional LFU is experiencing a performance decrease that might caused by the aging issue. In this case CMCLFU begins to behave like Random replacement policy and makes it possible to evict aged cache blocks. If the consecutive miss counter contin- ues to increase and reaches a higher threshold (termed as FlushThreshold, fixed as 1024 in our implementation), CM- CLFU will flush all data out and restart completely. We de- signed the RestartThreshold to be very high and usually can- not be reached with a common workload, but if the system is switching from one work-set into another (e.g. a server fin- ishes responding to one client and starts to respond to another client), since all the aged data from the old work-set is not likely to be referenced again, the consecutive miss counter can be increased very quickly and will potentially reach the RestartThreshold. During this kind of situation, the algorithm flushes all aged data and restarts the entire cache in order to help the system quickly adapt to the new work-set.

For details, check Report.pdf
